<!DOCTYPE html>
<html lang="en">
<head>
    <title>Realme Approval</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

    <style>
        html, body {
                height: 100%;
                margin: 0;
                display: flex;
                justify-content: center;
                align-items: center;
            }
            align-items: center;
            justify-content: center;


            }
            .centered-text {
                text-align: center;
            }
            .italic-small {
                font-style: italic;
                font-size: small;

            }
        </style>
</head>
</head>
<body>

<div class="container">
    <div class="centered-text">
        <h2>Realme Central Approval Status System</h2>
        <br>
        <p>   </p>

        <div id="loginForm">

            <input class="form-control" id="username" type="text" placeholder="Username" size="9" style="width: 200px;">
            <br>
            <input class="form-control" id="password" type="password" placeholder="Password" size="9" style="width: 200px;">
            <br>
            <button class="btn btn-primary" id="loginBtn">Login</button>
        </div>

        <div id="dataContainer" style="display: none;">

            <br>
            <button class="btn btn-primary" id="logoutBtn">Logout</button>

            <br>

            <h2> Part DOA Approval Status</h2>
            <p> Search below with Unique ID </p>

            <br>
            <input class="form-control" id="myInput" type="text" placeholder="Enter MAC ID">
            <br>
            <!-- Add this inside the "dataContainer" div -->
            <div id="createFormContainer">
                <div id="createFormContainer">
                    <br>
                    <button class="btn btn-primary" id="createFormBtn">Submit Form</button>

                    <br>
                    <br>

                </div>
            </div>

            <table class="table table-bordered table-striped">
                <thead>
                <tr>
                    <th>Approval ID</th>
                    <th>Region</th>
                    <th>ASP</th>
                    <th>SC Code</th>
                    <th>Case ID</th>
                    <th>Delivery Challan No</th>
                    <th>Box condition</th>
                    <th>DOA category</th>
                    <th>Symptom</th>
                    <th>Status</th>
                    <th>Approved By</th>
                </tr>
                </thead>
                <tbody id="myTable">
                <!-- Data Rows -->
                </tbody>
            </table>
        </div>

        <br>


        <p9 class="italic-small">if any user login issues, please reach out to your RTTS  </p9>



    </div>

    <script>
  $(document).ready(function() {
    var loggedInUser; // Stores the currently logged in user

    // Data array for users and corresponding data
    var userData = [
      {
        username: "ram",
        password: "gopal",
        data: [
          {
            approvalid: "ram@gmail.com",
            region: "ram@gmail.com",
            asp: "9989894894",
            sccode: "IN61-001",
            caseid: "SC1",
            dcno: "State1",
            boxc: "City1",
            doac: "ID1",
            symptom: "MAC1",
            status: "Approved",
            statusby: "siva"
          },
          // More data for user1...
        ]
      },
      {
        username: "siva",
        password: "kumar",
        data: [
          {
            approvalid: "ram@gmail.com",
            region: "ram@gmail.com",
            asp: "9989894894",
            sccode: "IN61-001",
            caseid: "SC1",
            dcno: "State1",
            boxc: "City1",
            doac: "ID1",
            symptom: "MAC1",
            status: "Approved",
            statusby: "siva"
          },
          // More data for user2...
        ]
      }

      // Add more users as needed...
    ];

    // Function to display the data for the authenticated user
    function displayUserData(username) {
      var user = userData.find(function(user) {
        return user.username === username;
      });

      if (user) {
        var dataRows = "";
        user.data.forEach(function(data) {
          dataRows += "<tr>";
          dataRows += "<td>" + data.approvalid + "</td>";
          dataRows += "<td>" + data.region + "</td>";
          dataRows += "<td>" + data.asp + "</td>";
          dataRows += "<td>" + data.sccode + "</td>";
          dataRows += "<td>" + data.caseid + "</td>";
          dataRows += "<td>" + data.dcno + "</td>";
          dataRows += "<td>" + data.boxc + "</td>";
          dataRows += "<td>" + data.doac + "</td>";
          dataRows += "<td>" + data.symptom + "</td>";
          dataRows += "<td>" + data.status + "</td>";
          dataRows += "<td>" + data.statusby + "</td>";
          dataRows += "</tr>";
        });

        $("#myTable").html(dataRows);
        $("#loginForm").hide();
        $("#dataContainer").show();
      }
    }

    // Event handler for login button click
    $("#loginBtn").on("click", function() {
      var username = $("#username").val();
      var password = $("#password").val();

      // Perform basic authentication
      var authenticatedUser = userData.find(function(user) {
        return user.username === username && user.password === password;
      });

      if (authenticatedUser) {
        loggedInUser = username;
        displayUserData(username);
      } else {
        alert("Invalid username or password");
      }
    });

    // Event handler for logout button click
    $("#logoutBtn").on("click", function() {
      loggedInUser = undefined;
      $("#myTable").html(""); // Clear the table
      $("#dataContainer").hide();
      $("#loginForm").show();
      $("#username").val("");
      $("#password").val("");
    });

    // Search functionality (same as before)
    $("#myInput").on("keyup", function() {
      var value = $(this).val().toLowerCase();
      $("#myTable tr").filter(function() {
        $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1);
      });
    });




  $(document).ready(function() {
    // Event handler for "Create Form" button click
    $(document).on("click", "#createFormBtn", function() {
      // Get the iframe URL
      var iframeUrl =
        "https://docs.google.com/forms/d/e/1FAIpQLSeRYkVtx9aLq4FfWCGbeB4crKuo-dd9z8DjUSO7q-v2KYWLLg/viewform?";

      // Open the URL in a new tab/window
      window.open(iframeUrl, "_blank");
    });
  });


<!--    // Event handler for "Create Form" button click-->
<!--    $(document).on("click", "#createFormBtn", function() {-->
<!--      var popup = window.open(-->
<!--        "",-->
<!--        "FormPopup",-->
<!--        "width=800,height=600,scrollbars=yes,resizable=yes"-->
<!--      );-->

<!--      var iframeUrl =-->
<!--        "https://docs.google.com/forms/d/e/1FAIpQLSeRYkVtx9aLq4FfWCGbeB4crKuo-dd9z8DjUSO7q-v2KYWLLg/viewform?embedded=true";-->
<!--      var iframe =-->
<!--        '<iframe src="' +-->
<!--        iframeUrl +-->
<!--        '" width="100%" height="100%" style="border:0;"></iframe>';-->

<!--      popup.document.write(iframe);-->

<!--      var closePopupBtn =-->
<!--        '<button id="closePopupBtn">Close Popup</button>';-->
<!--      popup.document.write(closePopupBtn);-->

<!--      $(popup.document).on("click", "#closePopupBtn", function() {-->
<!--        popup.close();-->
<!--      });-->
<!--    });-->
  });

</script>
    <br>
    <div class="container text-center">
        <p> <span id="ipAddress"></span></p>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
    $(document).ready(function() {
      // Get the IP address using an API
      $.getJSON("https://api.ipify.org?format=json", function(data) {
        var ipAddress = data.ip;
        $("#ipAddress").text(ipAddress);
      });
    });
  </script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
    $(document).ready(function() {
      // Fetch the hit count from counter.php
      $.get("counter.php", function(data) {
        // Update the hit count on the webpage
        $("#hitCount").text("Hit Count: " + data);
      });
    });
  </script>

</body>
</html>